metadata:
 description: Workspace devfile builder
 displayName: module5
 name: module5-app  
schemaVersion: 2.2.2

components:
- container:
   args:
   - tail
   - -f
   - /dev/null
   endpoints:
   - name: https-python
     protocol: https
     targetPort: 5001
   - exposure: none
     name: debug
     targetPort: 5858
   env:   
   - name: DEBUG_PORT
     value: "5858"
   - name: KAFKA_BOOTSTRAP_SERVERS
     value: "testuser1-kafka-kafka-bootstrap.testuser1-proj.svc.cluster.local"
   image: registry.access.redhat.com/ubi9/python-39:1-1739420387
   mountSources: true
  name: py

commands:
- exec:
   commandLine: pip install -r requirements.txt
   component: py
   group:
     isDefault: true
     kind: build
   workingDir: ${PROJECT_SOURCE}
  id: pip-install-requirements
- exec:
   commandLine: flask run --host=0.0.0.0 --port=5001
   component: py
   group:
     isDefault: true
     kind: run
   workingDir: ${PROJECT_SOURCE}
  id: run-python
