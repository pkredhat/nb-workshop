metadata:
 description: Devfile to assist with RH OpenTelemetry
 displayName: RH Open Telemetry
 name: module5-workspace
schemaVersion: 2.2.2

components:
- container:
   args:
   - tail
   - -f
   - /dev/null
   endpoints:
   - name: https-python
     protocol: https
     targetPort: 5000
   - exposure: none
     name: debug
     targetPort: 5858
   env:   
   - name: DEBUG_PORT
     value: "5858"  
   image: registry.access.redhat.com/ubi9/python-39:1-1739420387
   mountSources: true
  name: py

commands:
- exec:
   commandLine: pip install -r requirements.txt
   component: py
   group:
     isDefault: true
     kind: build
   workingDir: ${PROJECT_SOURCE}
  id: pip-install-requirements
- exec:
   commandLine: flask run --host=0.0.0.0 --port=5000
   component: py
   group:
     isDefault: true
     kind: run
   workingDir: ${PROJECT_SOURCE}
  id: run-python